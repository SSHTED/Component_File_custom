<!-- scFileRelatedListHeader.html -->
<template>
  <div class="slds-card__header slds-grid">
    <div class="slds-media slds-media_center">
      <div class="slds-media__figure">
        <div class="title">
          <!-- 아이콘 -->
          <lightning-icon class="titleIcon" icon-name={icon} size="small"></lightning-icon>
          <!-- 타이틀 -->
          <template if:true={isComponentSizeSmall}>
            <p class="headerTitle_small">
              <a href="#" target="_blank" title={title}>{title}</a>
            </p>
            <div>
              <div class="headerTitle_Info">
                <p>항목 : {fileData.length}</p>
                <template if:true={isSortBtnClick}>
                  <p>• 정렬 : {sortOptions.sortBy}</p>
                  <lightning-icon icon-name={sortDirectionIcon} alternative-text="direction" size="x-small"></lightning-icon>
                </template>
              </div>
            </div>
          </template>

          <template if:false={isComponentSizeSmall}>
            <p class="headerTitle_large">
              <a href="#" target="_blank" title={title}>{title}</a>
            </p>
            <div>
              <div class="headerTitle_Info">
                <p>항목 : {fileData.length}</p>
                <template if:true={isSortBtnClick}>
                  <p>• 정렬 : {sortOptions.sortBy}</p>
                  <lightning-icon icon-name={sortDirectionIcon} alternative-text="direction" size="x-small"></lightning-icon>
                </template>
              </div>
            </div>
           </template>

        </div>
      </div>

      <template if:false={isComponentSizeSmall}>
        <!-- 버튼 영역 -->
        <div class="btnGroup">
          <!-- 검색 -->
          <lightning-input class="searchBox" type="search"></lightning-input>
          
          <lightning-button-group class="inner_btnGroup">
            <!-- 파일 업로드 버튼 -->
            <template if:true={actUploadBtn}>
              <lightning-button-icon icon-name="utility:upload" variant="border-filled" alternative-text="파일 업로드"
                title="파일 업로드" onclick={handleFileUploadBtnClick}></lightning-button-icon>
            </template>
            <!-- 선택 다운로드 버튼 -->
            <template if:true={actDownloadBtn}>
              <lightning-button-icon icon-name="utility:download" variant="border-filled" alternative-text="선택 다운로드"
                title="선택 다운로드" onclick={handleDownloadBtnClick}></lightning-button-icon>
            </template>
            <!-- 선택 삭제 버튼 -->
            <template if:true={actDeleteBtn}>
              <lightning-button-icon icon-name="utility:delete" variant="border-filled" alternative-text="선택 삭제"
                title="선택 삭제" onclick={handleDeleteBtnClick}></lightning-button-icon>
            </template>
          </lightning-button-group>

          <!-- 정렬 버튼 -->
          <lightning-button-menu class="inner_btnMenu" menu-alignment="auto" variant="border-filled" icon-name="utility:sort" onselect={handleSortBtnClick}>
            <lightning-menu-item value="파일명" label="정렬: 파일명"></lightning-menu-item>
            <lightning-menu-item value="생성일자" label="정렬: 생성 일자"></lightning-menu-item>
            <lightning-menu-item value="확장자" label="정렬: 확장자"></lightning-menu-item>
            <lightning-menu-item value="크기" label="정렬: 크기"></lightning-menu-item>
          </lightning-button-menu>

          <!-- 확장/축소 버튼 -->
          <lightning-icon class="toggleIcon" icon-name={tableToggleIcon} alternative-text="Toggle" size="x-small" onclick={handleExpandToggle}></lightning-icon>
        </div>
      </template>

      <template if:true={isComponentSizeSmall}>
        <div class="btnGroup">
          <!-- 검색 -->
          <lightning-input class="searchBox" type="search"></lightning-input>

          <template if:true={isDropdownVisible}>
            <lightning-button-menu class="inner_btnMenu" menu-alignment="auto" variant="border-filled">
              <template if:true={actUploadBtn}>
                <lightning-menu-item label="파일 업로드" onclick={handleFileUploadBtnClick}></lightning-menu-item>
              </template>
              <template if:true={actDownloadBtn}>
                <lightning-menu-item label="선택 다운로드" onclick={handleDownloadBtnClick}></lightning-menu-item>
              </template>
              <template if:true={actDeleteBtn}>
                <lightning-menu-item label="선택 삭제" onclick={handleDeleteBtnClick}></lightning-menu-item>
              </template>
            </lightning-button-menu>
          </template>

          <lightning-button-menu class="inner_btnMenu" menu-alignment="auto" variant="border-filled" icon-name="utility:sort"
            onselect={handleSortBtnClick}>
            <lightning-menu-item value="파일명" label="정렬: 파일명"></lightning-menu-item>
            <lightning-menu-item value="생성일자" label="정렬: 생성 일자"></lightning-menu-item>
            <lightning-menu-item value="확장자" label="정렬: 확장자"></lightning-menu-item>
            <lightning-menu-item value="크기" label="정렬: 크기"></lightning-menu-item>
          </lightning-button-menu>
          <lightning-icon class="toggleIcon" icon-name={tableToggleIcon} alternative-text="Toggle" size="x-small" onclick={handleExpandToggle}></lightning-icon>
        </div>
      </template>
    </div>
  </div>

  <!-- 업로드 모달 창 -->
  <c-sc-file-related-list-upload-modal 
    if:true={isShowUploadModal}
    file-data={fileData}
    record-id={recordId}
    category={category}
    onclose={handleCloseModal}>
  </c-sc-file-related-list-upload-modal>
  <!-- 다운로드 모달 창 -->
  <c-sc-file-related-list-download-modal    
    if:true={isShowDownloadModal}
    download-progress={downloadProgress}
    total-files-to-download={totalFilesToDownload}
    is-download-end={isDownloadEnd}
    ondownloadcancel={handleDownloadCancel}
    onclose={handleCloseModal}>
  </c-sc-file-related-list-download-modal> 

</template>